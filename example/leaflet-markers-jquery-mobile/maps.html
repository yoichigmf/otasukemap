<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>leaflet</title>

<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta http-equiv="cleartype" content="on">

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>

<link rel="stylesheet" href="leaflet.css" />
<!--[if lte IE 8]>
    <link rel="stylesheet" href="leaflet.ie.css" />
<![endif]-->

<script src="leaflet.js"></script>
  
<script>
var samplePoints = [
	[40.719595,-96.629784],
	[40.748480,-96.590524],
	[40.741358,-96.594630],
	[40.833790,-96.616664],
	[40.834705,-96.629059],
	[40.855425,-96.658874],
	[40.756886,-96.611549],
	[40.822740,-96.610154],
	[40.766073,-96.623367],
	[40.784355,-96.641709],
	[40.780446,-96.651389],
	[40.787573,-96.622485],
	[40.827060,-96.613759],
	[40.812976,-96.646248],
	[40.808960,-96.664999],
	[40.755265,-96.694302],
	[40.846560,-96.628464],
	[40.787573,-96.622485],
	[40.850260,-96.719444],
	[40.753055,-96.647084],
	[40.792745,-96.671959],
	[40.864477,-96.728637],
	[40.808960,-96.664999],
	[40.784355,-96.641709],
	[40.791900,-96.749019],
	[40.849690,-96.626349],
	[40.834815,-96.676989],
	[40.857494,-96.709599],
	[40.807100,-96.653679],
	[40.834355,-96.638144],
	[40.831630,-96.673704],
	[40.853225,-96.663159],
	[40.824600,-96.612149],
	[40.828020,-96.644679],
	[40.754035,-96.599919],
	[40.834860,-96.602674],
	[40.845840,-96.651029],
	[40.824066,-96.617610],
	[40.815830,-96.706219],
	[40.843800,-96.701779],
	[40.778995,-96.694144],
	[40.838120,-96.731779],
	[40.846155,-96.715544],
	[40.825240,-96.656699],
	[40.813002,-96.648838],
	[40.857494,-96.709599],
	[40.744770,-96.694919],
	[40.755750,-96.686684],
	[40.727829,-96.687660],
	[40.768430,-96.660399],
	[40.768620,-96.654666],
	[40.769300,-96.651449],
	[40.746550,-96.648126],
	[40.746550,-96.648126],
	[40.746550,-96.648126],
	[40.746550,-96.648126],
	[40.746550,-96.648126],
	[40.746550,-96.648126],
	[40.764775,-96.643127],
	[40.768825,-96.642469],
	[40.784355,-96.641709],
	[40.784355,-96.641709],
	[40.784355,-96.641709],
	[40.784355,-96.641709],
	[40.784355,-96.641709],
	[40.784355,-96.641709],
	[40.784355,-96.641709],
	[40.784355,-96.641709],
	[40.784355,-96.641709],
	[40.784285,-96.628939],
	[40.784285,-96.628939],
	[40.762945,-96.620964],
	[40.757485,-96.613859],
	[40.796735,-96.623574],
	[40.821025,-96.773109],
	[40.769700,-96.607344],
	[40.813040,-96.672839],
	[40.845550,-96.658219],
	[40.801975,-96.705609],
	[40.800738,-96.627658],
	[40.787865,-96.619804],
	[40.860895,-96.691049],
	[40.744770,-96.694919],
	[40.744770,-96.694919],
	[40.744999,-96.592838],
	[40.784355,-96.641709],
	[40.782735,-96.616524],
	[40.753745,-96.594884],
	[40.753745,-96.594884],
	[40.807100,-96.653679],
	[40.818365,-96.706934],
	[40.877928,-96.725696],
	[40.761510,-96.691273],
	[40.833385,-96.617229],
	[40.746550,-96.648126],
	[40.857494,-96.709599],
	[40.857494,-96.709599],
	[40.834705,-96.629059],
	[40.796735,-96.623574],
	[40.796735,-96.623574],
	[40.834360,-96.642919],
	[40.797980,-96.771649],
	[40.797980,-96.771649],
	[40.798440,-96.653624],
	[40.798440,-96.653624],
	[40.766073,-96.623367],
	[40.857494,-96.709599],
	[40.857494,-96.709599],
	[40.744770,-96.694919],
	[40.757475,-96.692599],
	[40.828020,-96.644679],
	[40.823590,-96.613764],
	[40.744999,-96.592838],
	[40.801945,-96.696849],
	[40.812893,-96.679629],
	[40.807120,-96.675199],
	[40.813050,-96.669806],
	[40.791234,-96.685254],
	[40.788060,-96.684814],
	[40.808960,-96.664999],
	[40.808960,-96.664999],
	[40.808960,-96.664999],
	[40.834815,-96.675779],
	[40.843800,-96.701779],
	[40.776495,-96.698049],
	[40.807100,-96.653679],
	[40.807100,-96.653679],
	[40.807100,-96.653679],
	[40.775260,-96.691004],
	[40.775260,-96.691004],
	[40.843750,-96.731199],
	[40.850260,-96.719444]
];

var map, minimal, midnightCommander, motorways
var waypoints = [];
var direction_pos = 0;


$("#test").live('pageinit', function() {

	resizeMap();

	var resizeTimer;
	$(window).resize(function() {
		clearTimeout(resizeTimer);
		resizeTimer = setTimeout(resizeMap, 100);
	});
	
	setTimeout(function() {
		
		var pointLayer = new L.LayerGroup();
		for (var i = 0; i < samplePoints.length; i++) {
			var placemark = new L.Marker(new L.LatLng(samplePoints[i][0], samplePoints[i][1])).bindPopup("This is Littleton, CO.");
			pointLayer.addLayer(placemark)
		}


		var cloudmadeAttribution = 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade',
				cloudmadeOptions = {maxZoom: 18, attribution: cloudmadeAttribution},
				cloudmadeUrl = 'http://{s}.tile.cloudmade.com/8ee2a50541944fb9bcedded5165f09d9/{styleId}/256/{z}/{x}/{y}.png';

		minimal = new L.TileLayer(cloudmadeUrl, cloudmadeOptions, {styleId: 22677});
		midnightCommander = new L.TileLayer(cloudmadeUrl, cloudmadeOptions, {styleId: 999});
		motorways = new L.TileLayer(cloudmadeUrl, cloudmadeOptions, {styleId: 46561});

		map = new L.Map('map_canvas', {center: new L.LatLng(samplePoints[0][0], samplePoints[0][1]), zoom: 14, layers: [minimal, motorways, pointLayer]});

		var baseMaps = {
			"Minimal": minimal,
			"Night View": midnightCommander
		};

		var overlayMaps = {
			"Motorways": motorways,
			"Cities": pointLayer
		};

		layersControl = new L.Control.Layers(baseMaps, overlayMaps);

		map.addControl(layersControl);
		
		
		
		
		
		
		
		
	
	}, 400);
	

});

function resizeMap() {

	var mapheight = $(window).height();
	var mapwidth = $(window).width();
	$("#map_canvas").height(mapheight);
	$("#map_canvas").width(mapwidth);
	
}

</script>
  
</head>
<body>

<div data-role="page" id="test">

	<div data-role="header">
		<h1>Map</h1>
	</div>
	
	<div data-role="content" style="padding:0px; height:100%">	

	  <div id="map_canvas" style="float:left;width:70%;height:100%"></div>
  
	</div>
	
</div>

</body>
</html>